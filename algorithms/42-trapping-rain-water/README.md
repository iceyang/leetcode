# 42.接雨水

给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。

![](rainwatertrap.png)

上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 感谢*Marcos*贡献此图。

示例:

```
输入: [0,1,0,2,1,0,1,3,2,1,2,1]
输出: 6
```

来源：力扣（LeetCode）

链接：https://leetcode-cn.com/problems/trapping-rain-water

著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。

## 解题思路

我们知道两个柱子之间能否储存水取决了矮的那根柱子的高度
最开始的朴素想法是从左往右开始算，设置一个起始柱`begin`，从`i=1`开始遍历，那么会遇到下面的情况：

* 柱子比自己矮，认为可以装水，水量增加`height[begin]-height[i]`
* 柱子比自己高或者与自己等高，那么设置`begin`为当前柱子，`begin=i`

假设最右边的柱子是最高的，这逻辑是没问题的。然而当最右边的柱子不是最高，那会出现问题，比如将上面例子图中从最高柱子往右都计算进去的情况。

那我们只要保证我们的终止柱子是最高就行了，按照这个思路，我们先找出最高柱，然后分两路，分别从左往右、从右往左，想最高柱靠近，那么这样计算下来的水量，便是最终的结果了。
